<!-- Dedicated Image Editor Modal -->
<div class="modal fade" id="imageEditorModal" tabindex="-1" aria-labelledby="imageEditorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageEditorModalLabel">
                    <i class="fas fa-crop-alt me-2"></i>Image Editor
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="modal-body p-0">
                <div class="image-editor-container">
                    <!-- Main Image Editing Area -->
                    <div class="image-editor-main">
                        <div class="image-editor-canvas">
                            <img id="editorImage" src="" alt="Image to edit" class="editor-image">
                        </div>
                        
                        <!-- Image Editor Toolbar -->
                        <div class="image-editor-toolbar">
                            <div class="toolbar-group">
                                <button type="button" class="btn btn-outline-secondary btn-sm" id="rotateLeftBtn" title="Rotate Left">
                                    <i class="fas fa-undo"></i>
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" id="rotateRightBtn" title="Rotate Right">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Sidebar -->
                    <div class="image-editor-sidebar">
                        <div class="sidebar-content">
                            <!-- Image Information -->
                            <div class="sidebar-section">
                                <h6 class="sidebar-title">
                                    <i class="fas fa-info-circle me-2"></i>Image Information
                                </h6>
                                <div class="image-info">
                                    <div class="info-item">
                                        <span class="info-label">Original Size:</span>
                                        <span class="info-value" id="originalSize">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Current Size:</span>
                                        <span class="info-value" id="currentSize">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">File Type:</span>
                                        <span class="info-value" id="fileType">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Crop Settings -->
                            <div class="sidebar-section">
                                <h6 class="sidebar-title">
                                    <i class="fas fa-crop-alt me-2"></i>Crop Settings
                                </h6>
                                <div class="crop-settings">
                                    <div class="setting-item">
                                        <label class="form-label">Aspect Ratio</label>
                                        <div class="form-control form-control-sm" style="background: #e9ecef; color: #6c757d;">
                                            Square (1:1) - Locked
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <label for="cropWidth" class="form-label">Crop Width</label>
                                        <input type="number" class="form-control form-control-sm" id="cropWidth" placeholder="Auto" readonly>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <label for="cropHeight" class="form-label">Crop Height</label>
                                        <input type="number" class="form-control form-control-sm" id="cropHeight" placeholder="Auto" readonly>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Output Settings -->
                            <div class="sidebar-section">
                                <h6 class="sidebar-title">
                                    <i class="fas fa-cog me-2"></i>Output Settings
                                </h6>
                                <div class="output-settings">
                                    <div class="setting-item">
                                        <label for="outputQuality" class="form-label">JPEG Quality</label>
                                        <input type="range" class="form-range" id="outputQuality" min="60" max="100" value="95">
                                        <div class="quality-value">
                                            <span id="qualityValue">95%</span>
                                        </div>
                                    </div>
                                    
                                    <div class="setting-item">
                                        <label class="form-label">Output Sizes</label>
                                        <div class="output-sizes">
                                            <div class="size-item">
                                                <input type="checkbox" class="form-check-input" id="sizeLineage" checked>
                                                <label class="form-check-label" for="sizeLineage">
                                                    64×64px - Lineage
                                                </label>
                                            </div>
                                            <div class="size-item">
                                                <input type="checkbox" class="form-check-input" id="sizeDetail" checked>
                                                <label class="form-check-label" for="sizeDetail">
                                                    320×320px - Detail
                                                </label>
                                            </div>
                                            <div class="size-item">
                                                <input type="checkbox" class="form-check-input" id="sizeOriginal" checked>
                                                <label class="form-check-label" for="sizeOriginal">
                                                    Original - Full Size
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Processing Status -->
                            <div class="sidebar-section" id="processingStatus" style="display: none;">
                                <h6 class="sidebar-title">
                                    <i class="fas fa-spinner fa-spin me-2"></i>Processing
                                </h6>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                         role="progressbar" style="width: 0%"></div>
                                </div>
                                <div class="status-text mt-2" id="statusText">Preparing image...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <div class="footer-left">
                    <button type="button" class="btn btn-outline-secondary" id="resetImageBtn">
                        <i class="fas fa-undo me-2"></i>Reset
                    </button>
                    <button type="button" class="btn btn-outline-info" id="previewBtn">
                        <i class="fas fa-eye me-2"></i>Preview
                    </button>
                </div>
                
                <div class="footer-right">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="button" class="btn btn-primary" id="applyChangesBtn">
                        <i class="fas fa-check me-2"></i>Apply & Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Preview Modal -->
<div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="previewModalLabel">Image Preview</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="preview-container">
                    <div class="preview-item">
                        <h6>Lineage (64×64px)</h6>
                        <img id="previewLineage" src="" alt="Lineage preview" class="preview-image">
                    </div>
                    <div class="preview-item">
                        <h6>Detail (320×320px)</h6>
                        <img id="previewDetail" src="" alt="Detail preview" class="preview-image">
                    </div>
                    <div class="preview-item">
                        <h6>Original Size</h6>
                        <img id="previewOriginal" src="" alt="Original preview" class="preview-image">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
