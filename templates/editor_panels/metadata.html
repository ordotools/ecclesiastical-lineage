<!-- Metadata Panel Content -->
<div style="padding: 1em; display: grid; grid-template-columns: 1fr 1fr; gap: 1.5em;">
    <!-- Ranks Section -->
    <div>
        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 0.75em;">
            <h6 style="margin: 0; color: rgba(255, 255, 255, 0.9); font-size: 0.95em;">Clergy Ranks</h6>
            <button onclick="showAddRankModal()" 
                    style="padding: 0.3em 0.6em; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 3px; color: rgba(255, 255, 255, 0.8); cursor: pointer; font-size: 0.75em;">
                <i class="fas fa-plus" style="margin-right: 0.25em;"></i>Add
            </button>
        </div>
        
        <div style="max-height: 150px; overflow-y: auto;">
            {% for rank in ranks %}
            <div style="display: flex; align-items: center; justify-content: between; padding: 0.5em; margin-bottom: 0.25em; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 3px; font-size: 0.85em;">
                <div style="display: flex; align-items: center; flex: 1;">
                    <div style="width: 12px; height: 12px; background: {{ rank.color or '#3498db' }}; border-radius: 50%; margin-right: 0.5em; border: 1px solid rgba(255, 255, 255, 0.2);"></div>
                    <span style="color: rgba(255, 255, 255, 0.9);">{{ rank.name }}</span>
                    {% if rank.is_bishop %}
                    <span style="margin-left: 0.5em; padding: 0.1em 0.4em; background: rgba(255, 255, 255, 0.1); border-radius: 2px; font-size: 0.7em; color: rgba(255, 255, 255, 0.7);">Bishop</span>
                    {% endif %}
                </div>
                <div>
                    <button onclick="editRank({{ rank.id }})" 
                            style="padding: 0.2em 0.4em; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 2px; color: rgba(255, 255, 255, 0.7); cursor: pointer; font-size: 0.7em; margin-right: 0.25em;">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="deleteRank({{ rank.id }})" 
                            style="padding: 0.2em 0.4em; background: rgba(231, 76, 60, 0.2); border: none; border-radius: 2px; color: rgba(231, 76, 60, 0.8); cursor: pointer; font-size: 0.7em;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Organizations Section -->
    <div>
        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 0.75em;">
            <h6 style="margin: 0; color: rgba(255, 255, 255, 0.9); font-size: 0.95em;">Organizations</h6>
            <button onclick="showAddOrganizationModal()" 
                    style="padding: 0.3em 0.6em; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 3px; color: rgba(255, 255, 255, 0.8); cursor: pointer; font-size: 0.75em;">
                <i class="fas fa-plus" style="margin-right: 0.25em;"></i>Add
            </button>
        </div>
        
        <div style="max-height: 150px; overflow-y: auto;">
            {% for org in organizations %}
            <div style="display: flex; align-items: center; justify-content: between; padding: 0.5em; margin-bottom: 0.25em; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 3px; font-size: 0.85em;">
                <div style="display: flex; align-items: center; flex: 1; min-width: 0;">
                    <div style="width: 12px; height: 12px; background: {{ org.color or '#2ecc71' }}; border-radius: 50%; margin-right: 0.5em; border: 1px solid rgba(255, 255, 255, 0.2); flex-shrink: 0;"></div>
                    <div style="min-width: 0; flex: 1;">
                        <div style="color: rgba(255, 255, 255, 0.9); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            {{ org.name }}
                        </div>
                        {% if org.abbreviation %}
                        <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.75em;">{{ org.abbreviation }}</div>
                        {% endif %}
                    </div>
                </div>
                <div style="flex-shrink: 0;">
                    <button onclick="editOrganization({{ org.id }})" 
                            style="padding: 0.2em 0.4em; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 2px; color: rgba(255, 255, 255, 0.7); cursor: pointer; font-size: 0.7em; margin-right: 0.25em;">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="deleteOrganization({{ org.id }})" 
                            style="padding: 0.2em 0.4em; background: rgba(231, 76, 60, 0.2); border: none; border-radius: 2px; color: rgba(231, 76, 60, 0.8); cursor: pointer; font-size: 0.7em;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
// Placeholder functions for metadata management
// These would typically make HTMX requests to appropriate endpoints

function showAddRankModal() {
    console.log('Add rank modal requested');
    showNotification('Add rank functionality coming soon', 'info');
}

function editRank(rankId) {
    console.log('Edit rank:', rankId);
    showNotification('Edit rank functionality coming soon', 'info');
}

function deleteRank(rankId) {
    if (confirm('Are you sure you want to delete this rank?')) {
        console.log('Delete rank:', rankId);
        showNotification('Delete rank functionality coming soon', 'info');
    }
}

function showAddOrganizationModal() {
    console.log('Add organization modal requested');
    showNotification('Add organization functionality coming soon', 'info');
}

function editOrganization(orgId) {
    console.log('Edit organization:', orgId);
    showNotification('Edit organization functionality coming soon', 'info');
}

function deleteOrganization(orgId) {
    if (confirm('Are you sure you want to delete this organization?')) {
        console.log('Delete organization:', orgId);
        showNotification('Delete organization functionality coming soon', 'info');
    }
}

// Simple notification function
function showNotification(message, type = 'info') {
    if (typeof window.showNotification === 'function') {
        window.showNotification(message, type);
    } else {
        console.log(`${type.toUpperCase()}: ${message}`);
    }
}
</script>