<!-- Metadata Panel Content -->
<div class="panel-padding editor-flex-column" style="height: 100%;">
    <!-- Header with Management Button -->
    <div class="editor-flex-between editor-margin-bottom-l">
        <h6 class="editor-text-primary editor-text-xl" style="margin: 0;">Metadata</h6>
        <button onclick="openMetadataModal()" class="btn-section">
            <i class="fas fa-cog"></i>Management
        </button>
    </div>
    
    <!-- Content Grid -->
    <div class="editor-grid-2" style="flex: 1; min-height: 0;">
        <!-- Ranks Section -->
        <div class="editor-flex-column">
            <h6 class="editor-text-primary editor-text-l editor-margin-bottom-m" style="margin-top: 0;">Clergy Ranks</h6>
            
            <div style="flex: 1; overflow-y: auto; min-height: 0;">
                {% for rank in ranks %}
                <div class="metadata-item">
                    <div class="metadata-item-color" style="background: {{ rank.color or '#3498db' }};"></div>
                    <span class="metadata-item-label">{{ rank.name }}</span>
                    {% if rank.is_bishop %}
                    <span class="metadata-item-badge">Bishop</span>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Organizations Section -->
        <div class="editor-flex-column">
            <h6 class="editor-text-primary editor-text-l editor-margin-bottom-m" style="margin-top: 0;">Organizations</h6>
            
            <div style="flex: 1; overflow-y: auto; min-height: 0;">
                {% for org in organizations %}
                <div class="metadata-item">
                    <div class="metadata-item-color" style="background: {{ org.color or '#2ecc71' }};"></div>
                    <div style="min-width: 0; flex: 1;">
                        <div class="metadata-item-label" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            {{ org.name }}
                        </div>
                        {% if org.abbreviation %}
                        <div class="editor-text-tertiary editor-text-xs">{{ org.abbreviation }}</div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script>
// Simple function to open the metadata management modal
function openMetadataModal() {
    if (typeof window.openMetadataManagementModal === 'function') {
        window.openMetadataManagementModal();
    } else {
        console.error('Metadata management modal function not available');
        // Fallback notification
        if (typeof window.showNotification === 'function') {
            window.showNotification('Metadata management modal not available', 'error');
        } else {
            alert('Metadata management modal not available');
        }
    }
}
</script>