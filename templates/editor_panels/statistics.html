<!-- Statistics Panel Content -->
<div class="panel-padding">
    <h6 class="editor-text-primary editor-text-xl editor-margin-bottom-l" style="margin-top: 0;">Database Statistics</h6>
    
    <div class="editor-grid-auto">
        <!-- Overview Stats -->
        <div class="stat-card">
            <h6 class="stat-card-header editor-text-secondary editor-text-m">
                <i class="fas fa-users" style="color: rgba(52, 152, 219, 0.8);"></i>
                Overview
            </h6>
            <div class="stat-card-content">
                <div class="stat-card-item">
                    <span>Total Clergy:</span>
                    <strong>{{ statistics.total_clergy }}</strong>
                </div>
                <div class="stat-card-item">
                    <span>Bishops:</span>
                    <strong>{{ statistics.total_bishops }}</strong>
                </div>
                <div class="stat-card-item">
                    <span>Priests:</span>
                    <strong>{{ statistics.total_priests }}</strong>
                </div>
            </div>
        </div>

        <!-- Top Organizations -->
        <div class="stat-card">
            <h6 class="stat-card-header editor-text-secondary editor-text-m">
                <i class="fas fa-church" style="color: rgba(46, 160, 67, 0.8);"></i>
                Top Organizations
            </h6>
            <div class="stat-card-content stat-card-scrollable">
                {% for org, count in statistics.org_stats[:5] %}
                <div class="stat-bar-item">
                    <span class="stat-bar-label" title="{{ org }}">{{ org }}</span>
                    <div class="stat-bar-container">
                        <div class="stat-bar" style="width: {{ (count / statistics.org_stats[0][1] * 50) | int }}px; background: rgba(46, 160, 67, 0.6);"></div>
                        <strong class="stat-bar-value">{{ count }}</strong>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Ranks Distribution -->
        <div class="stat-card">
            <h6 class="stat-card-header editor-text-secondary editor-text-m">
                <i class="fas fa-graduation-cap" style="color: rgba(142, 68, 173, 0.8);"></i>
                Ranks Distribution
            </h6>
            <div class="stat-card-content stat-card-scrollable">
                {% for rank, count in statistics.rank_stats[:5] %}
                <div class="stat-bar-item">
                    <span class="stat-bar-label">{{ rank }}</span>
                    <div class="stat-bar-container">
                        <div class="stat-bar" style="width: {{ (count / statistics.rank_stats[0][1] * 50) | int }}px; background: rgba(142, 68, 173, 0.6);"></div>
                        <strong class="stat-bar-value">{{ count }}</strong>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="stat-card">
            <h6 class="stat-card-header editor-text-secondary editor-text-m">
                <i class="fas fa-bolt" style="color: rgba(241, 196, 15, 0.8);"></i>
                Quick Actions
            </h6>
            <div class="stat-actions">
                <button onclick="exportData()" class="btn-stat-action blue">
                    <i class="fas fa-download"></i>Export Data
                </button>
                <button onclick="generateReport()" class="btn-stat-action green">
                    <i class="fas fa-chart-bar"></i>Generate Report
                </button>
                <button onclick="refreshStats()" class="btn-stat-action white">
                    <i class="fas fa-sync-alt"></i>Refresh Stats
                </button>
            </div>
        </div>
    </div>

    <!-- Additional Stats Row -->
    <div class="stat-summary-row">
        <div class="stat-summary-grid">
            <div>
                <div class="stat-summary-item-label">Ordinations</div>
                <div class="stat-summary-item-value">
                    {% set total_ordinations = statistics.get('total_ordinations', '—') %}{{ total_ordinations }}
                </div>
            </div>
            <div>
                <div class="stat-summary-item-label">Consecrations</div>
                <div class="stat-summary-item-value">
                    {% set total_consecrations = statistics.get('total_consecrations', '—') %}{{ total_consecrations }}
                </div>
            </div>
            <div>
                <div class="stat-summary-item-label">Organizations</div>
                <div class="stat-summary-item-value">{{ statistics.org_stats | length }}</div>
            </div>
            <div>
                <div class="stat-summary-item-label">Ranks</div>
                <div class="stat-summary-item-value">{{ statistics.rank_stats | length }}</div>
            </div>
        </div>
    </div>
</div>

<script>
// Statistics panel functions
function exportData() {
    console.log('Export data requested');
    showNotification('Data export functionality coming soon', 'info');
}

function generateReport() {
    console.log('Generate report requested');
    showNotification('Report generation functionality coming soon', 'info');
}

function refreshStats() {
    console.log('Refresh stats requested');
    // Reload the statistics panel
    htmx.ajax('GET', '/editor/statistics', {
        target: '#statistics-content',
        swap: 'innerHTML'
    });
    showNotification('Statistics refreshed', 'success');
}

function showNotification(message, type = 'info') {
    console.log(`${type.toUpperCase()}: ${message}`);
}
</script>